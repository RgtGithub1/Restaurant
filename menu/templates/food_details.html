{% extends "project_base.html" %}
{% load static %}
{% load cart %}

{% block content %}
<div id="main" class="col-lg-9 mx-auto">
    <h1>{{ category }} <a href="{% url 'menu:menu_list' %}"
            style="text-align: right; float: right; color: black; text-decoration: none;">Menu</a></h1>
    <div class="row">
        {% for food in food_details_list %}
        <div class="col-md-3 mt-4">
            <a href="{{ product.get_absolute_url }}">
                <img src="{% if food.image %}{{ food.image.url }}{% else %}{% static " img/no_image.png" %}{% endif %}"
                    width="100%" height="240" border-radus="50%" style="border-radius: 15%">
            </a><br>
            <a href="{{ food.get_absolute_url }}"
                style="color: black; margin-left: 124px; text-decoration: none;">{{food.name }} {{food.id}}</a>
            <!-- <p style="margin-left: 124px;">{{ food.description }}</p> -->
            <p style="margin-left: 124px;">â‚¹{{ food.price }}</p>

            <div class="text-center col">

                {% if food|is_in_cart:request.session.cart %}
                <div class="row text-center col">
                    <form action="/{{category.id}}/{{category.slug}}/" method="POST">
                        {% csrf_token %}
                        <input hidden type="text" name="product" value='{{food.id}}'>
                        <input hidden type="number" name="remove" value='-1'>
                        <input type="submit" value="-">
                    </form>


                    <div class="text-center col">{{food|cart_quantity:request.session.cart}}</div>

                    <form action="/{{category.id}}/{{category.slug}}/" method="POST">
                        {% csrf_token %}
                        <input hidden type="text" name="product" value='{{food.id}}'>
                        <!-- <button style="background-color: green; color: #fff;" class="plus-btn" type="button">+</button> -->
                        <input type="submit" value="+">
                    </form>
                    
                </div>
                {%else%}
                <form action="/{{category.id}}/{{category.slug}}/" method="POST">
                    {% csrf_token %}
                    <input hidden type="text" name="product" value='{{food.id}}'>
                    <input type="submit" value="Add">
                </form>
                {%endif%}

            </div>

        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
